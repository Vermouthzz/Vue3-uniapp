"use strict";const e=require("../../common/vendor.js"),g=require("../../store/useUserStore.js"),h=require("../../store/useCartStore.js"),v=require("../../store/useUserCardStore.js");require("../../api/cart.js");require("../../request/index.js");require("../../api/user.js");if(!Array){const s=e.resolveComponent("van-checkbox"),n=e.resolveComponent("van-submit-bar");(s+n)()}Math||(S+L+b+k)();const b=()=>"./components/CartItem.js",k=()=>"../../components/LoveList/LoveList.js",L=()=>"./components/ChangeItem.js",S=()=>"./components/CartHeader.js",x={__name:"cart",setup(s){const n=g.useUserStore(),t=h.useCartStore(),u=v.useUserCardStore();e.ref(0);const d=(c,a)=>{a.forEach(r=>r.selected=c.detail),t.updateCart(a)},p=()=>{e.index.redirectTo({url:"/indexpkg/login/login"})},_=c=>{t.onAllChange(c.detail)},f=()=>{if(!t.selectedItems.length)return e.index.showToast({title:"请选择商品结算",icon:"error"});u.optimalTicket(t.allRetailPrice,"selected"),e.index.navigateTo({url:"/subpkg/create-order/create-order"})},m=e.computed(()=>t.allRetailPrice-u.optimalTicket(t.allRetailPrice,"price"));return(c,a)=>e.e({a:!e.unref(n).userInfo},e.unref(n).userInfo?e.e({c:!e.unref(t).cartList.length},e.unref(t).cartList.length?{d:e.f(e.unref(t).cartList,(r,i,l)=>({a:e.o(o=>d(o,r[0].value),i),b:"3a2c1965-2-"+l,c:e.p({value:r[0].value.every(o=>o.selected),checkedColor:"#db1b2d"}),d:e.t(r[0].cart_fee),e:e.f(r[0].value,(o,I,C)=>({a:"3a2c1965-3-"+l+"-"+C,b:e.p({cartItem:o}),c:o.item_id})),f:i}))}:{},{e:e.o(_),f:e.p({value:e.unref(t).allChecked,checkedColor:"#db1b2d"}),g:e.o(f),h:e.p({price:e.unref(m)*100,buttonText:"去结算"})}):{b:e.o(p)})}},q=e._export_sfc(x,[["__file","D:/github/app-unis/pages/cart/cart.vue"]]);wx.createPage(q);
