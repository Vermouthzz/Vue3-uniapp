"use strict";const e=require("../../../common/vendor.js");require("../../../utils/mitt.js");const w=require("../../../store/useCartStore.js"),S=require("../../../store/useUserCardStore.js"),P=require("../../../api/goods.js");require("../../../api/cart.js");require("../../../request/index.js");require("../../../store/useUserStore.js");require("../../../api/user.js");if(!Array){const s=e.resolveComponent("van-checkbox"),t=e.resolveComponent("van-icon"),r=e.resolveComponent("van-stepper"),a=e.resolveComponent("van-swipe-cell"),c=e.resolveComponent("GoodsPopop");(s+t+r+a+c)()}const b=()=>"../../../components/GoodsPopop/GoodsPopop.js";Math||b();const x={__name:"CartItem",setup(s){const t=s;S.useUserCardStore();const r=w.useCartStore();e.ref(1);const a=e.computed(()=>t.cartItem.selected?t.cartItem.sku_item.retail_price-r.reNum:t.cartItem.sku_item.retail_price),c=e.ref([]),n=e.ref(!1),I=async()=>{const o=await P.getSkuListAPI(t.cartItem.goods_id);c.value=o.data,Object.assign(c.value,{item_id:t.cartItem.item_id}),n.value=!0},v=()=>{r.cartList.forEach(o=>{o.stepperFlag=!1}),t.cartItem.stepperFlag=!0},C=e.computed(()=>{var o;return(o=t.cartItem)==null?void 0:o.spec.map(p=>p.value).join(" ")}),g=async()=>{r.delCartItem(t.cartItem.item_id)},f=()=>{},h=o=>{t.cartItem.count=o.detail,r.updateCart(t.cartItem)},k=o=>{t.cartItem.selected=o.detail,r.updateCart(t.cartItem)};return(o,p)=>{var m,i,u,_,l,d;return e.e({a:e.o(k),b:e.p({value:t.cartItem.selected,checkedColor:"#f81e31"}),c:(m=t.cartItem)==null?void 0:m.sku_item.pic,d:e.t((i=t.cartItem)==null?void 0:i.sku_item.service),e:e.t((u=t.cartItem)==null?void 0:u.sku_item.title),f:e.t(e.unref(C)),g:e.p({name:"arrow-down",size:"20rpx"}),h:e.o(I),i:e.t((_=t.cartItem)==null?void 0:_.sku_item.price),j:e.t(e.unref(a)),k:t.cartItem.stepperFlag},t.cartItem.stepperFlag?{l:e.o(h),m:e.p({value:(l=t.cartItem)==null?void 0:l.count})}:{n:e.t((d=t.cartItem)==null?void 0:d.count),o:e.o(v)},{p:e.o(g),q:e.o(f),r:e.p({rightWidth:65,asyncClose:!0}),s:e.o(q=>n.value=q),t:e.p({goods:c.value,show:n.value})})}}},y=e._export_sfc(x,[["__scopeId","data-v-b707d0d0"],["__file","D:/github/app-unis/pages/cart/components/CartItem.vue"]]);wx.createComponent(y);
