"use strict";const e=require("../../common/vendor.js"),m=require("../../store/useSearchStore.js"),d=require("../../api/search.js");require("../../request/index.js");require("../../store/useUserStore.js");require("../../api/user.js");if(!Array){const c=e.resolveComponent("CustomHeader"),s=e.resolveComponent("van-search");(c+s)()}const _=()=>"../../components/CustomHeader/CustomHeader.js";Math||(_+g+f+S)();const f=()=>"./components/HotCate.js",g=()=>"./components/HotSearch.js",S=()=>"./SearchDetail.js",C={__name:"search",setup(c){const s=m.useSearchStore(),{safeAreaInsets:u}=e.index.getSystemInfoSync(),r=e.ref(1);e.provide("type",r),e.watch(r,(a,l)=>{a!=l&&n()});const t=e.ref(""),h=()=>{t.value.length==0?e.index.navigateBack():(s.addSearchItem(t.value),n())},p=a=>{t.value=a,s.addSearchItem(a),n()},o=e.ref(!0),v=a=>{t.value=a.detail,t.value==""&&(o.value=!0)},i=e.ref([]),n=async()=>{e.index.showLoading({mask:!0});const a=await d.getSearchResultAPI(t.value,r.value);i.value=a.list,o.value=!1,e.index.hideLoading()};return(a,l)=>e.e({a:e.p({title:"搜索"}),b:e.o(v),c:e.p({value:t.value,shape:"round",useLeftIconSlot:!0,placeholder:"请输入搜索关键词"}),d:e.t(t.value.length?"搜索":"取消"),e:e.o(h),f:o.value},o.value?{g:e.o(p),h:e.p({title:"搜索历史",list:e.unref(s).searchList,item:t.value}),i:e.p({title:"热门搜索",item:t.value})}:{j:e.p({list:i.value})},{k:`calc(100vh - 200rpx - ${e.unref(u).top}px)`,l:e.unref(u).top+"px"})}},x=e._export_sfc(C,[["__file","D:/github/app-unis/indexpkg/search/search.vue"]]);wx.createPage(x);
