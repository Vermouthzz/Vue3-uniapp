"use strict";const e=require("../../common/vendor.js"),p=require("../../store/useSearchStore.js"),v=require("../../api/search.js");require("../../request/index.js");require("../../store/useUserStore.js");if(!Array){const r=e.resolveComponent("CustomHeader"),o=e.resolveComponent("van-search");(r+o)()}const _=()=>"../../components/CustomHeader/CustomHeader.js";Math||(_+m+d+f)();const d=()=>"./components/HotCate.js",m=()=>"./components/HotSearch.js",f=()=>"./SearchDetail.js",g={__name:"search",setup(r){const o=p.useSearchStore(),{safeAreaInsets:c}=e.index.getSystemInfoSync(),n=e.ref(1);e.provide("type",n),e.watch(n,(s,i)=>{s!=i&&u()});const t=e.ref(""),l=()=>{t.value.length==0?e.index.navigateBack():(o.addSearchItem(t.value),u())},h=s=>{t.value=s.detail,t.value==""&&(a.value=[])},a=e.ref([]),u=async()=>{e.index.showLoading({mask:!0});const s=await v.getSearchResultAPI(t.value,n.value);a.value=s.list,a.value.length&&e.index.hideLoading()};return(s,i)=>e.e({a:e.p({title:"搜索"}),b:e.o(h),c:e.p({value:t.value,shape:"round",useLeftIconSlot:!0,placeholder:"请输入搜索关键词"}),d:e.t(t.value.length?"搜索":"取消"),e:e.o(l),f:!a.value.length},a.value.length?{i:e.p({list:a.value})}:{g:e.p({title:"搜索历史",list:e.unref(o).searchList}),h:e.p({title:"热门搜索"})},{j:`calc(100vh - 200rpx - ${e.unref(c).top}px)`,k:e.unref(c).top+"px"})}},S=e._export_sfc(g,[["__file","D:/github/app-unis/indexpkg/search/search.vue"]]);wx.createPage(S);
