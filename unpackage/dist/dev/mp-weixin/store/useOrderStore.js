"use strict";const s=require("../common/vendor.js"),i=require("../api/order.js"),u=s.defineStore("order",()=>{const o=s.ref([]),a=s.ref(""),c=async()=>{const e=await i.getOrderListAPI();o.value=e.data;let t=new Date;o.value.forEach(r=>{let n=new Date(r.effective_time);t<n?r.remainTime=n-t:r.remainTime=0})},d=async e=>{const t=await i.getOrderItemAPI(e);a.value=t.list;let r=new Date;a.value.remainTime=new Date(a.value.effective_time)-r};return{orderList:o,orderItem:a,getOrderItem:d,getOrderList:c,updateItem:async(e,t)=>{a.value&&(a.order_status=e),s.index.showLoading({mask:!0}),await i.updateOrderItemStatusAPI(e,t)&&s.index.hideLoading()},createOrderItem:async(e,t,r,n)=>{const m=(await i.createOrderAPI(e,t,r,n)).data.id;return d(m),!0}}});exports.useOrderStore=u;
