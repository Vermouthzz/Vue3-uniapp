"use strict";const a=require("../common/vendor.js"),i=require("../api/order.js"),u=a.defineStore("order",()=>{const o=a.ref([]),n=a.ref(""),c=async()=>{const r=await i.getOrderListAPI();o.value=r.data;let e=new Date;o.value.forEach(t=>{let s=new Date(t.effective_time);e<s?t.remainTime=s-e:t.remainTime=0})},d=async r=>{const e=await i.getOrderItemAPI(r);n.value=e.list;let t=new Date;n.value.remainTime=new Date(n.value.effective_time)-t};return{orderList:o,orderItem:n,getOrderItem:d,getOrderList:c,updateItem:async(r,e)=>{a.index.showLoading({mask:!0}),await i.updateOrderItemAPI(r,e)&&a.index.hideLoading()},createOrderItem:async(r,e,t,s)=>{const m=(await i.createOrderAPI(r,e,t,s)).data.id;return d(m),!0}}});exports.useOrderStore=u;
